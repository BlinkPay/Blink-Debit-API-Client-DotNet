# Blink-Debit-API-Client-CSharp-DotNet
The Blink Debit API client for C# .NET.

APIs to execute Direct Credit payments for customers who use online banking with supported banks.

These APIs power **Blink PayNow** enabling one-off payments, and **Blink AutoPay** enabling recurring payments.

**Request IDs**
Request IDs are included in the header in every response, to assist in tracing and debugging.

**API Change Policy**
Additive changes may be made to request query parameters and JSON responses. To preserve backward compatibility, endpoint naming updates or JSON elements that already exist will not be removed or renamed until a major version (URL) change. This policy applies only after the official v1 release.

This C# SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 1.0.19
- SDK version: 1.0.0
- Build package: org.openapitools.codegen.languages.CSharpNetCoreClientCodegen
  For more information, please visit [https://www.blinkpay.co.nz/contact](https://www.blinkpay.co.nz/contact)

<a id="frameworks-supported"></a>
## Frameworks supported

<a id="dependencies"></a>
## Dependencies

- [RestSharp](https://www.nuget.org/packages/RestSharp) - 106.13.0 or later
- [Json.NET](https://www.nuget.org/packages/Newtonsoft.Json/) - 13.0.2 or later
- [JsonSubTypes](https://www.nuget.org/packages/JsonSubTypes/) - 1.8.0 or later
- [System.ComponentModel.Annotations](https://www.nuget.org/packages/System.ComponentModel.Annotations) - 5.0.0 or later

The DLLs included in the package may not be the latest version. We recommend using [NuGet](https://docs.nuget.org/consume/installing-nuget) to obtain the latest version of the packages:
```
Install-Package RestSharp
Install-Package Newtonsoft.Json
Install-Package JsonSubTypes
Install-Package System.ComponentModel.Annotations
```

NOTE: RestSharp versions greater than 105.1.0 have a bug which causes file uploads to fail. See [RestSharp#742](https://github.com/restsharp/RestSharp/issues/742).
NOTE: RestSharp for .Net Core creates a new socket for each api call, which can lead to a socket exhaustion problem. See [RestSharp#1406](https://github.com/restsharp/RestSharp/issues/1406).

<a id="installation"></a>
## Installation
Run the following command to generate the DLL
- [Mac/Linux] `/bin/sh build.sh`
- [Windows] `build.bat`

Then include the DLL (under the `bin` folder) in the C# project, and use the namespaces:
```csharp
using BlinkDebitApiClient.Api;
using BlinkDebitApiClient.Client;
using BlinkDebitApiClient.Model.V1;
```
<a id="packaging"></a>
## Packaging

A `.nuspec` is included with the project. You can follow the Nuget quickstart to [create](https://docs.microsoft.com/en-us/nuget/quickstart/create-and-publish-a-package#create-the-package) and [publish](https://docs.microsoft.com/en-us/nuget/quickstart/create-and-publish-a-package#publish-the-package) packages.

This `.nuspec` uses placeholders from the `.csproj`, so build the `.csproj` directly:

```
nuget pack -Build -OutputDirectory out BlinkDebitApiClient.csproj
```

Then, publish to a [local feed](https://docs.microsoft.com/en-us/nuget/hosting-packages/local-feeds) or [other host](https://docs.microsoft.com/en-us/nuget/hosting-packages/overview) and consume the new package via Nuget as usual.

<a id="usage"></a>
## Usage

To use the API client with a HTTP proxy, setup a `System.Net.WebProxy`
```csharp
Configuration c = new Configuration();
System.Net.WebProxy webProxy = new System.Net.WebProxy("http://myProxyUrl:80/");
webProxy.Credentials = System.Net.CredentialCache.DefaultCredentials;
c.Proxy = webProxy;
```

<a id="getting-started"></a>
## Getting Started

```csharp
using System.Collections.Generic;
using System.Diagnostics;
using BlinkDebitApiClient.Api;
using BlinkDebitApiClient.Client;
using BlinkDebitApiClient.Model.V1;

namespace Example
{
    public class Example
    {
        public static void Main()
        {

            Configuration config = new Configuration();
            config.BasePath = "https://sandbox.debit.blinkpay.co.nz/payments/v1";
            // Configure OAuth2 access token for authorization: Bearer
            config.AccessToken = "YOUR_ACCESS_TOKEN";

            var apiInstance = new BankMetadataApi(config);
            var requestId = 9f4cb72c-7563-4be5-b76f-1a4197fbad13;  // Guid? | An optional request ID. If provided, it overrides the interaction ID generated by Blink Debit. (optional) 
            var xCorrelationId = f1e62d03-af1a-4c7b-aadb-d916adeb8d9d;  // Guid? | An optional correlation ID for logging chain of events. If provided, it overrides the correlation ID generated by Blink Debit. (optional) 

            try
            {
                // Get Bank Metadata
                List<BankMetadata> result = apiInstance.GetMeta(requestId, xCorrelationId);
                Debug.WriteLine(result);
            }
            catch (ApiException e)
            {
                Debug.Print("Exception when calling BankMetadataApi.GetMeta: " + e.Message );
                Debug.Print("Status Code: "+ e.ErrorCode);
                Debug.Print(e.StackTrace);
            }

        }
    }
}
```

<a id="documentation-for-api-endpoints"></a>
## Documentation for API Endpoints

All URIs are relative to *https://sandbox.debit.blinkpay.co.nz/payments/v1*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*BankMetadataApi* | [**GetMeta**](docs/BankMetadataApi.md#getmeta) | **GET** /meta | Get Bank Metadata
*EnduringConsentsApi* | [**CreateEnduringConsent**](docs/EnduringConsentsApi.md#createenduringconsent) | **POST** /enduring-consents | Create Enduring Consent
*EnduringConsentsApi* | [**GetEnduringConsent**](docs/EnduringConsentsApi.md#getenduringconsent) | **GET** /enduring-consents/{consent_id} | Get Enduring Consent
*EnduringConsentsApi* | [**RevokeEnduringConsent**](docs/EnduringConsentsApi.md#revokeenduringconsent) | **DELETE** /enduring-consents/{consent_id} | Revoke Enduring Consent
*PaymentsApi* | [**CreatePayment**](docs/PaymentsApi.md#createpayment) | **POST** /payments | Create Payment
*PaymentsApi* | [**GetPayment**](docs/PaymentsApi.md#getpayment) | **GET** /payments/{payment_id} | Get Payment
*QuickPaymentsApi* | [**CreateQuickPayment**](docs/QuickPaymentsApi.md#createquickpayment) | **POST** /quick-payments | Create Quick Payment
*QuickPaymentsApi* | [**GetQuickPayment**](docs/QuickPaymentsApi.md#getquickpayment) | **GET** /quick-payments/{quick_payment_id} | Get Quick Payment
*QuickPaymentsApi* | [**RevokeQuickPayment**](docs/QuickPaymentsApi.md#revokequickpayment) | **DELETE** /quick-payments/{quick_payment_id} | Revoke Quick Payment
*RefundsApi* | [**CreateRefund**](docs/RefundsApi.md#createrefund) | **POST** /refunds | Create Refund
*RefundsApi* | [**GetRefund**](docs/RefundsApi.md#getrefund) | **GET** /refunds/{refund_id} | Get Refund
*SingleConsentsApi* | [**CreateSingleConsent**](docs/SingleConsentsApi.md#createsingleconsent) | **POST** /single-consents | Create Single Consent
*SingleConsentsApi* | [**GetSingleConsent**](docs/SingleConsentsApi.md#getsingleconsent) | **GET** /single-consents/{consent_id} | Get Single Consent
*SingleConsentsApi* | [**RevokeSingleConsent**](docs/SingleConsentsApi.md#revokesingleconsent) | **DELETE** /single-consents/{consent_id} | Revoke Single Consent


<a id="documentation-for-models"></a>
## Documentation for Models

- [Model.Account](docs/Account.md)
- [Model.AccountNumberRefundRequest](docs/AccountNumberRefundRequest.md)
- [Model.Amount](docs/Amount.md)
- [Model.AuthFlow](docs/AuthFlow.md)
- [Model.AuthFlowDetail](docs/AuthFlowDetail.md)
- [Model.Bank](docs/Bank.md)
- [Model.BankMetadata](docs/BankMetadata.md)
- [Model.BankMetadataFeatures](docs/BankMetadataFeatures.md)
- [Model.BankMetadataFeaturesDecoupledFlow](docs/BankMetadataFeaturesDecoupledFlow.md)
- [Model.BankMetadataFeaturesDecoupledFlowAvailableIdentifiersInner](docs/BankMetadataFeaturesDecoupledFlowAvailableIdentifiersInner.md)
- [Model.BankMetadataFeaturesEnduringConsent](docs/BankMetadataFeaturesEnduringConsent.md)
- [Model.BankMetadataRedirectFlow](docs/BankMetadataRedirectFlow.md)
- [Model.Consent](docs/Consent.md)
- [Model.ConsentDetail](docs/ConsentDetail.md)
- [Model.CreateConsentResponse](docs/CreateConsentResponse.md)
- [Model.CreateQuickPaymentResponse](docs/CreateQuickPaymentResponse.md)
- [Model.DecoupledFlow](docs/DecoupledFlow.md)
- [Model.DecoupledFlowAllOf](docs/DecoupledFlowAllOf.md)
- [Model.DecoupledFlowHint](docs/DecoupledFlowHint.md)
- [Model.DecoupledFlowHintAllOf](docs/DecoupledFlowHintAllOf.md)
- [Model.DetailErrorResponseModel](docs/DetailErrorResponseModel.md)
- [Model.EnduringConsentRequest](docs/EnduringConsentRequest.md)
- [Model.EnduringConsentRequestAllOf](docs/EnduringConsentRequestAllOf.md)
- [Model.EnduringPaymentRequest](docs/EnduringPaymentRequest.md)
- [Model.FlowHint](docs/FlowHint.md)
- [Model.FullRefundRequest](docs/FullRefundRequest.md)
- [Model.FullRefundRequestAllOf](docs/FullRefundRequestAllOf.md)
- [Model.GatewayFlow](docs/GatewayFlow.md)
- [Model.GatewayFlowAllOf](docs/GatewayFlowAllOf.md)
- [Model.GatewayFlowAllOfFlowHint](docs/GatewayFlowAllOfFlowHint.md)
- [Model.IdentifierType](docs/IdentifierType.md)
- [Model.PartialRefundRequest](docs/PartialRefundRequest.md)
- [Model.PartialRefundRequestAllOf](docs/PartialRefundRequestAllOf.md)
- [Model.Payment](docs/Payment.md)
- [Model.PaymentRequest](docs/PaymentRequest.md)
- [Model.PaymentResponse](docs/PaymentResponse.md)
- [Model.Pcr](docs/Pcr.md)
- [Model.Period](docs/Period.md)
- [Model.QuickPaymentRequest](docs/QuickPaymentRequest.md)
- [Model.QuickPaymentResponse](docs/QuickPaymentResponse.md)
- [Model.RedirectFlow](docs/RedirectFlow.md)
- [Model.RedirectFlowAllOf](docs/RedirectFlowAllOf.md)
- [Model.RedirectFlowHint](docs/RedirectFlowHint.md)
- [Model.Refund](docs/Refund.md)
- [Model.RefundDetail](docs/RefundDetail.md)
- [Model.RefundRequest](docs/RefundRequest.md)
- [Model.RefundResponse](docs/RefundResponse.md)
- [Model.SingleConsentRequest](docs/SingleConsentRequest.md)
- [Model.SingleConsentRequestAllOf](docs/SingleConsentRequestAllOf.md)


<a id="documentation-for-authorization"></a>
## Documentation for Authorization


Authentication schemes defined for the API:
<a id="Bearer"></a>
### Bearer

- **Type**: OAuth
- **Flow**: application
- **Authorization URL**:
- **Scopes**:
  - create:single_consent: Create single consent requests
  - view:single_consent: View single consent requests
  - revoke:single_consent: Revoke a single payment consent, removing the ability to execute the payment
  - create:enduring_consent: Create enduring consent requests
  - view:enduring_consent: View enduring consent requests
  - revoke:enduring_consent: Revoke an enduring payment consent, removing the ability to execute payments
  - create:payment: Execute payment instructions with a consent
  - view:payment: View the status of existing payments
  - view:metadata: View bank metadata
  - view:transaction: View transactions
  - create:quick_payment: Create quick payments
  - view:quick_payment: View quick payments
  - create:refund: Create refunds
  - view:refund: View refunds
